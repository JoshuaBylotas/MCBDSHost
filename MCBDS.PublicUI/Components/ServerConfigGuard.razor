@inject ServerConfigService ServerConfig

@if (!HasServerConfigured)
{
    <div class="alert alert-info" role="alert">
        <div class="d-flex align-items-center">
            <i class="bi bi-info-circle display-4 me-3"></i>
            <div>
                <h5 class="alert-heading">No Server Configured</h5>
                <p class="mb-0">Please add a server connection using the Server dropdown in the menu to get started.</p>
            </div>
        </div>
    </div>
}
else
{
    @ChildContent
}

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }
    
    [Parameter]
    public bool HasServerConfigured { get; set; }
    
    protected override async Task OnInitializedAsync()
    {
        if (!HasServerConfigured)
        {
            await ServerConfig.EnsureInitializedAsync();
            var currentUrl = ServerConfig.GetCurrentServerUrl();
            HasServerConfigured = !string.IsNullOrWhiteSpace(currentUrl);
        }
    }
}
